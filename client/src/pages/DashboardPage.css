/* ==========================================================================
   1. DESIGN TOKENS & THEMING
   ========================================================================== */

/* --- Base Variables (Light Mode Default) --- */
:root {
  /* Layout & Spacing */
  --radius: 14px;
  --header-height: 80px;
  --max-width: 1200px;

  /* Colors: Neutral & Brand */
  --bg: #f6fbff;
  --surface: #ffffff;
  --surface-2: #eef7ff;
  --border-soft: rgba(11, 34, 90, 0.08);
  --footer-bg: #eef6ff;

  /* Colors: Text */
  --text-main: #0b1220;
  --text-sub: #566074;
  --muted: #566074;

  /* Colors: Accents */
  --accent: #3b82f6;
  --accent-2: #60a5fa;

  /* Shadows & Effects */
  --shadow: 0 10px 30px rgba(11, 34, 90, 0.06);
  --glass: rgba(255, 255, 255, 0.75);

  /* Palette: Governor Bay (Used for hovers) */
  --gb-50: #f1f5fd;
  --gb-100: #dee7fb;
  --gb-200: #c5d7f8;
  --gb-300: #9dbef3;
  --gb-600: #385bd8;
  --gb-700: #2d45be;
}

/* --- Light Mode Enforcements (Fixes glitching) --- */
.dp-root--light {
  --bg: #f6fbff;
  --surface: #ffffff;
  --text-main: #0b1220;
  --text-sub: #566074;
}

/* Force specific text colors in Light Mode */
.dp-root--light .dp-welcome-title,
.dp-root--light .dp-card-title,
.dp-root--light .dp-activity-title,
.dp-root--light .dp-contest-name,
.dp-root--light .dp-prob-title {
  color: #0b1220 !important;
}

.dp-root--light .dp-activity-meta,
.dp-root--light .dp-contest-meta {
  color: #566074 !important;
}

.dp-root--light .dp-big-btn-ghost {
  color: #0b1220 !important;
  border: 1px solid var(--border-soft);
}

.dp-root--light .dp-big-btn-ghost .dp-big-btn-title,
.dp-root--light .dp-big-btn-ghost .dp-big-btn-desc {
  color: #0b1220 !important;
}

.dp-root--light .dp-activity-item {
  background: var(--surface-2) !important;
  border-color: var(--border-soft) !important;
}

/* --- Dark Mode Tokens (Cosmic Glass Theme) --- */
.dp-root--dark {
  /* Background: Deep void with spotlight */
  --bg: radial-gradient(circle at 50% -20%, #1e293b, #020617 60%);

  /* Surface: Semi-transparent dark slate */
  --surface: rgba(30, 41, 59, 0.4);
  --surface-2: rgba(15, 23, 42, 0.6);

  /* Text: Crisp off-white */
  --text-main: #f8fafc;
  --text-sub: #94a3b8;
  --muted: #64748b;

  /* UI Tokens */
  --shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
  --glass: rgba(15, 23, 42, 0.7);
  --footer-bg: transparent;
  --border-soft: rgba(255, 255, 255, 0.08);

  /* Hover States */
  --gb-50: rgba(59, 130, 246, 0.1);
  --gb-100: rgba(59, 130, 246, 0.15);
  --gb-200: rgba(59, 130, 246, 0.25);
  --gb-600: #60a5fa;
}

/* ==========================================================================
   2. GLOBAL RESET & LAYOUT
   ========================================================================== */
body, html {
  height: 100%;
  margin: 0;
  padding: 0;
}

.dp-root {
  min-height: 100vh;
  background: var(--bg);
  color: var(--text-main);
  display: flex;
  flex-direction: column;
  font-family: Inter, system-ui, -apple-system, sans-serif;
  transition: color 0.2s ease, background 0.2s ease;
}

.dp-main {
  max-width: var(--max-width);
  width: 100%;
  margin: 24px auto;
  padding: 0 20px 34px;
  display: flex;
  flex-direction: column;
  gap: 22px;
}

/* ==========================================================================
   3. HEADER COMPONENT
   ========================================================================== */
.dp-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px 36px;
  background: transparent;
  border-bottom: 1px solid var(--border-soft);
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(6px);
}

.dp-brand {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
}

.dp-brand-logo {
  width: 46px;
  height: 46px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: white;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 30px rgba(59, 130, 246, 0.12);
}

.dp-brand-title {
  font-weight: 800;
  letter-spacing: 0.02em;
  font-size: 1.05rem;
}

.dp-brand-sub {
  font-size: 0.82rem;
  color: var(--text-sub);
}

.dp-header-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.dp-theme-toggle {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: none;
  background: var(--surface);
  box-shadow: 0 6px 18px rgba(11, 34, 90, 0.06);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.dp-user-block {
  display: flex;
  gap: 10px;
  align-items: center;
}

.dp-user-name {
  font-weight: 700;
  color: var(--text-main);
}

.dp-logout-btn {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border-soft);
  background: transparent;
  color: var(--accent-2);
  cursor: pointer;
  transition: all 0.18s;
}

.dp-logout-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
  background: linear-gradient(
    135deg,
    rgba(59, 130, 246, 0.06),
    rgba(96, 165, 250, 0.04)
  );
}

/* ==========================================================================
   4. HERO SECTION & BUTTONS
   ========================================================================== */
.dp-hero {
  display: flex;
  gap: 22px;
  align-items: flex-start;
}

.dp-hero-left {
  flex: 1;
}

.dp-hero-head {
  margin-bottom: 22px;
}

.dp-welcome-title {
  margin: 0;
  font-size: 1.8rem;
  font-weight: 900;
  line-height: 1.02;
}

.dp-welcome-sub {
  margin: 8px 0 18px;
  color: var(--text-sub);
}

.dp-hero-actions {
  display: flex;
  gap: 16px;
  align-items: center;
  flex-wrap: wrap;
}

/* --- Large Feature Buttons --- */
.dp-big-btn {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 22px 26px;
  border-radius: 12px;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  border: 0;
  min-width: 420px;
  max-width: 720px;
  box-shadow: 0 18px 40px rgba(11, 34, 90, 0.08);
  cursor: pointer;
  text-align: left;
}

.dp-big-btn-ghost {
  background: linear-gradient(
    180deg,
    rgba(243, 230, 160, 0.77),
    rgba(162, 251, 176, 0.85)
  );
  color: var(--text-main);
  border: 1px solid var(--border-soft);
  box-shadow: 0 20px 18px rgba(22, 81, 232, 0.05);
}

.dp-big-btn-left {
  width: 64px;
  height: 64px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  background: rgba(255, 255, 255, 0.12);
}

.dp-big-btn-title {
  font-weight: 800;
  font-size: 1.05rem;
  margin-bottom: 6px;
}

.dp-big-btn-desc {
  font-size: 0.95rem;
}

/* --- Common UI Buttons --- */
.dp-btn {
  border-radius: 999px;
  padding: 8px 14px;
  border: 0;
  background: transparent;
  cursor: pointer;
  font-weight: 700;
}

.dp-btn-solid {
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  box-shadow: 0 10px 30px rgba(59, 130, 246, 0.12);
}

.dp-icon-action {
  font-size: 1.2rem;
  color: var(--gb-300);
  transition: transform 0.2s ease, color 0.2s ease;
}

/* ==========================================================================
   5. GRID & CARDS SYSTEM
   ========================================================================== */
.card,
.dp-card {
  border-radius: 14px;
  background: var(--surface);
  padding: 22px;
  box-shadow: var(--shadow);
  border: 1px solid rgba(11, 34, 90, 0.03);
}

.dp-bottomgrid {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: 22px;
  align-items: start;
}

.dp-side-column {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.dp-card-head {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 12px;
}

.dp-card-title {
  font-weight: 800;
  font-size: 1.05rem;
  color: var(--text-main);
}

.dp-card-sub {
  color: var(--text-sub);
  font-size: 0.95rem;
  margin-left: 8px;
}

/* ==========================================================================
   6. INTERACTIVE LIST ITEMS (Clickable)
   ========================================================================== */
.clickable-card,
.clickable-card:visited,
.clickable-card:active {
  display: flex;
  text-decoration: none;
  color: var(--text-main) !important;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 8px;
  position: relative;
  border: 1px solid transparent;
}

.clickable-card:hover {
  background-color: var(--gb-50);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  border-color: var(--gb-200);
}

.clickable-card:hover .dp-icon-action {
  color: var(--gb-600);
  transform: translateX(3px);
}

/* ==========================================================================
   7. LIST COMPONENT: RECENT ACTIVITY
   ========================================================================== */
.dp-activity-list {
  display: flex;
  flex-direction: column;
  /* gap handled by zebra logic in dark mode, normal here */
  gap: 8px;
}

.dp-activity-item {
  align-items: flex-start;
  padding: 12px;
  gap: 14px;
  border-bottom: 1px solid var(--border-soft);
  background: var(--surface-2);
  border-radius: 12px;
}

.dp-activity-item:last-child {
  border-bottom-color: transparent;
}

.dp-activity-left {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-top: 5px;
  width: 16px;
}

.dp-activity-dot {
  width: 8px;
  height: 8px;
  background: var(--gb-300);
  border-radius: 50%;
  z-index: 2;
  transition: background 0.2s;
}

.dp-activity-line {
  width: 2px;
  background: var(--border-soft);
  flex: 1;
  margin-top: -2px;
  min-height: 20px;
}

.dp-activity-item:last-child .dp-activity-line {
  display: none;
}

.clickable-card:hover .dp-activity-dot {
  background: var(--gb-600);
  box-shadow: 0 0 0 2px var(--gb-200);
}

.dp-activity-content {
  flex: 1;
}

.dp-activity-time {
  display: inline-block;
  background: var(--border-soft);
  color: var(--text-main);
  font-size: 0.8rem;
  border-radius: 6px;
  padding: 2px 6px;
  margin-bottom: 4px;
}

.dp-activity-title {
  font-weight: 800;
  font-size: 0.95rem;
  color: var(--text-main);
}

.dp-activity-meta {
  color: var(--text-sub);
  font-size: 0.9rem;
}

/* ==========================================================================
   8. LIST COMPONENT: CONTESTS & LOGOS
   ========================================================================== */
.dp-contest-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.dp-contest-row {
  align-items: center;
  padding: 12px;
  gap: 12px;
  background: var(--surface-2);
  border-radius: 10px;
}

.dp-contest-icon {
  width: 42px;
  height: 42px;
  background: var(--gb-50);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-weight: 700;
  color: var(--gb-700);
}

.dp-contest-icon.logo-mode {
  background: transparent;
  border: 1px solid var(--gb-100);
}

.dp-contest-info {
  flex: 1;
}

.dp-contest-name {
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--text-main);
}

.dp-contest-meta {
  font-size: 0.8rem;
  color: var(--text-sub);
  margin-top: 2px;
}

/* ==========================================================================
   9. COMPONENT: PROBLEMS & QUOTES
   ========================================================================== */
.dp-problems-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
}

.dp-problem-card {
  padding: 18px;
  border-radius: 12px;
  background: linear-gradient(180deg, var(--surface), #fbfdff);
  border: 1px solid var(--border-soft);
  box-shadow: 0 8px 30px rgba(11, 34, 90, 0.04);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.dp-prob-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dp-prob-title {
  font-weight: 800;
  font-size: 1.05rem;
  color: var(--text-main);
}

.dp-prob-meta {
  color: var(--text-sub);
  font-size: 0.92rem;
  display: flex;
  gap: 8px;
}

.dp-prob-badge {
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 0.82rem;
}

.dp-badge-easy { background: #ecffef; color: #059669; }
.dp-badge-medium { background: #fff6e6; color: #d97706; }
.dp-badge-hard { background: #fff0f3; color: #b91c1c; }

.dp-quote-large {
  margin-top: 12px;
  padding: 32px;
  border-radius: 12px;
  background: linear-gradient(
    180deg,
    rgba(250, 250, 255, 0.9),
    rgba(255, 255, 255, 0.95)
  );
  text-align: center;
}

.dp-quote-text-large {
  margin: 0;
  font-weight: 900;
  font-size: 1.15rem;
  color: var(--text-main);
}

.dp-quote-author {
  margin-top: 10px;
  color: var(--text-sub);
}

/* ==========================================================================
   10. FOOTER
   ========================================================================== */
.dp-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 36px;
  background: var(--footer-bg);
  border-top: 1px solid var(--border-soft);
  margin-top: auto;
}

.dp-link-btn {
  background: transparent;
  border: 0;
  color: var(--text-sub);
  cursor: pointer;
  margin-left: 8px;
}

/* ==========================================================================
   11. DARK MODE OVERRIDES (Cosmic Glass Theme)
   ========================================================================== */

/* --- Background Grid Effect --- */
.dp-root--dark::before {
  content: "";
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background-image: 
    linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
  z-index: 0;
  mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 80%);
}

/* --- Glass Cards --- */
.dp-root--dark .card,
.dp-root--dark .dp-problem-card,
.dp-root--dark .dp-quote-large,
.dp-root--dark .dp-next-contests {
  background: var(--surface);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
}

/* --- Hover Effects --- */
.dp-root--dark .clickable-card:hover,
.dp-root--dark .dp-problem-card:hover {
  background: linear-gradient(to right, rgba(59, 130, 246, 0.1), rgba(15, 23, 42, 0.4));
  border-color: rgba(96, 165, 250, 0.4);
  box-shadow: 0 0 15px rgba(59, 130, 246, 0.15);
  transform: translateY(-2px) scale(1.005);
}

.dp-root--dark .dp-hero-left {
  background: linear-gradient(135deg, rgba(30, 41, 59, 0.6), rgba(15, 23, 42, 0.8));
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* --- Buttons: Problem Analyser (Primary Glow) --- */
.dp-root--dark .dp-big-btn {
  background: linear-gradient(135deg, #2563eb, #1e40af) !important;
  border: 1px solid rgba(96, 165, 250, 0.4);
  color: white !important;
  box-shadow: 0 0 20px rgba(37, 99, 235, 0.4), inset 0 1px 1px rgba(255, 255, 255, 0.2) !important;
}

.dp-root--dark .dp-big-btn:hover {
  background: linear-gradient(135deg, #3b82f6, #1e3a8a) !important;
  box-shadow: 0 0 30px rgba(37, 99, 235, 0.6) !important;
  border-color: #60a5fa;
  transform: translateY(-2px);
}

.dp-root--dark .dp-big-btn .dp-big-btn-title,
.dp-root--dark .dp-big-btn .dp-big-btn-desc {
  color: #ffffff !important;
}

/* --- Buttons: Code Analyser (Bright Gradient + Dark Text) --- */
.dp-root--dark .dp-big-btn.dp-big-btn-ghost {
  background: linear-gradient(180deg, rgba(243, 230, 160, 0.9), rgba(162, 251, 176, 0.9)) !important;
  border: 1px solid rgba(250, 204, 21, 0.3);
  color: #0f172a !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(255, 255, 255, 0.2) !important;
}

.dp-root--dark .dp-big-btn.dp-big-btn-ghost:hover {
  background: linear-gradient(135deg, #fef08a, #86efac) !important;
  border-color: rgba(74, 222, 128, 0.8);
  box-shadow: 0 0 30px rgba(74, 222, 128, 0.3) !important;
  transform: translateY(-2px);
}

.dp-root--dark .dp-big-btn.dp-big-btn-ghost .dp-big-btn-title,
.dp-root--dark .dp-big-btn.dp-big-btn-ghost .dp-big-btn-desc {
  color: #0f172a !important;
}

.dp-root--dark .dp-big-btn.dp-big-btn-ghost .dp-big-btn-left {
  background: rgba(0, 0, 0, 0.1);
  border-color: rgba(0, 0, 0, 0.1);
}

/* --- Logo & Icons --- */
.dp-root--dark .dp-contest-icon {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.dp-root--dark .dp-contest-icon svg {
  color: #fff !important;
}

.dp-root--dark .dp-brand-logo {
  background: linear-gradient(135deg, #3b82f6, #60a5fa) !important;
  color: white !important;
  box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2) !important;
  border: none;
}

/* ==========================================================================
   12. SPECIAL STYLE: ZEBRA STRIPING (Dark Mode List)
   ========================================================================== */

.dp-activity-item {
  margin-bottom: 0 !important;
  border-radius: 0;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

/* Corners for first/last items */
.dp-activity-list > div:first-child .dp-activity-item {
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
}

.dp-activity-list > div:last-child .dp-activity-item {
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
  border-bottom: none;
}

/* Odd/Even Logic targeting motion.div wrappers */
.dp-root--dark .dp-activity-list > div:nth-child(odd) .dp-activity-item {
  background: transparent !important;
}

.dp-root--dark .dp-activity-list > div:nth-child(even) .dp-activity-item {
  background: rgba(255, 255, 255, 0.149) !important;
}

/* List Item Hover */
.dp-root--dark .dp-activity-list > div .dp-activity-item:hover {
  background: linear-gradient(90deg, rgba(34, 91, 182, 0.208), transparent) !important;
  z-index: 10;
  transform: translateX(4px);
}

/* ==========================================================================
   13. RESPONSIVE
   ========================================================================== */
@media (max-width: 980px) {
  .dp-bottomgrid { grid-template-columns: 1fr; }
  .dp-hero { flex-direction: column; }
  .dp-big-btn { min-width: auto; width: 100%; }
  .dp-side-column { order: 2; }
  .dp-activity { order: 1; }
}